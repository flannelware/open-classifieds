<main>
	<div class="position-relative">
		<!-- shape Hero -->
		<section class="section section-lg section-shaped pb-150">
			<div class="shape shape-style-1 shape-default">
				<span></span>
				<span></span>
				<span></span>
				<span></span>
				<span></span>
				<span></span>
				<span></span>
				<span></span>
				<span></span>
			</div>
			<!-- SVG separator -->
			<div class="separator separator-bottom separator-skew">
				<svg x="0" y="0" viewBox="0 0 2560 100" preserveAspectRatio="none" version="1.1"
					xmlns="http://www.w3.org/2000/svg">
					<polygon class="fill-white" points="2560 0 2560 100 0 100"></polygon>
				</svg>
			</div>
		</section>
		<!-- 1st Hero Variation -->
	</div>
	<section class="section section-lg pt-lg-0 mt--100">
		<div class="container">
			<div class="form-group">
				<div class="input-group input-group-alternative mb-4 col-lg-8">
					<div class="input-group-prepend">
						<span class="input-group-text"><i class="ni ni-zoom-split-in"></i></span>
					</div>
					<input name="searchTerm" class="form-control" placeholder="Search Listings" type="text"
						[(ngModel)]="searchTerm" (keyup.enter)="search(searchTerm)" [disabled]="searching" autofocus />
					<button class="ml-1 btn btn-2 btn-neutral" button="submit"
						(click)="search(searchTerm)">{{searching ? 'Searching...' : 'Search'}} <i *ngIf="searching"
							class="fa fa-spin fa-circle-o-notch"></i></button>
				</div>
			</div>
			<div *ngIf="listings?.length === 0 && !searching">
				<div style="text-align: center;">
					<h4 style="text-align: center;">No listings found.</h4>
					<small *ngIf="kslUrl" style="margin-top: 0;">You can click <a href="{{kslUrl}}" target="_blank">
							here</a> to try searching KSL directly.</small>
				</div>
			</div>
			<div *ngIf="listings?.length > 0">
				<div style="text-align: center;"><small>{{listings?.length}} listings matching
						search
						keywords</small></div>
				<div style="text-align: center;"><small *ngIf="kslUrl"><a href="{{kslUrl}}" target="_blank">KSL
							Classified
							Link</a></small></div>
				<div class="row justify-content-center">
					<div class=" col-lg-12">
						<div class="row row-grid">
							<div class="col-lg-4" *ngFor="let listing of listings">
								<div class="card card-lift--hover shadow border-0">
									<div class="card-body py-5" placement="top" [ngbPopover]="listing.description"
										popoverTitle="Description">
										<img [src]="getPhotoUrl(listing.photo)" alt="Rounded image"
											class="img-fluid rounded shadow" style="max-height: 250px;" />
										<p><b>{{listing.title}}</b></p>
										<h5 class="text-primary" style="float: right;">
											<b>{{listing.price | currency}}</b>
										</h5>
										<div>
											<span class="badge badge-pill badge-primary">{{listing.city}},
												{{listing.state}}</span>
											<span class="badge badge-pill badge-success"><i class="fa fa-eye"></i>
												{{listing.pageviews}}</span>
											<span class="badge badge-pill badge-warning"><i class="fa fa-heart"></i>
												{{listing.favorited}}</span>
										</div>
										<a [routerLink]="['/listing', listing.id]" class="btn btn-primary mt-4">View</a>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</section>
</main>